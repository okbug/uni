<view><view class="topic-detail"><block wx:if="{{detail}}"><view class="article-info"><text class="title">{{detail.title.rendered}}</text><view class="article-info__category"><view class="cuIcon-form icons _i"></view><text class="category">{{detail.category[0].name}}</text><view class="cuIcon-time icons _i"></view><text class="time">{{detail.date}}</text></view></view></block><block wx:else><view class="article-info"><view class="title" style="width:420rpx;height:40rpx;background:#f3f3f3;"></view><view class="article-info__category"><image class="avator" style="background:#f3f3f3;" src="{{detail.author.avatar}}"></image><text class="category" style="width:100rpx;height:40rpx;background:#f3f3f3;">{{detail.author.name}}</text><view class="_i"></view><text class="time" style="width:100rpx;height:40rpx;background:#f3f3f3;">{{detail.time}}</text></view></view></block><block wx:if="{{article.nodes}}"><view class="entry-content clearfix" id="entry-content"><jyf-parser vue-id="3db16520-1" html="{{article_article}}" bind:__l="__l"></jyf-parser></view></block><block wx:else><view class="entry-content clearfix" id="entry-content"><block wx:for="{{article}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view style="padding-top:20rpx;"><view style="width:690rpx;height:40rpx;background:#f3f3f3;"></view><view style="width:690rpx;height:250rpx;background:#f3f3f3;margin-top:20rpx;"></view></view></block></view></block><block wx:if="{{advert.platform.weapp&&advert.type=='unit'}}"><view class="advert"></view></block><view class="topic-title-wrapper" id="comment"><view class="topic-title">主题详情</view><view class="onlooker-amount relative"><text>邀请好友参与讨论</text><text class="onlooker-arrow">>></text><button class="userLogin" open-type="share"></button></view></view><view class="commentdata"><block wx:if="{{comments.length==0}}"><view class="listnodata"><image class="nodataimg" lazyLoad="false" mode="aspectFit|aspectFill|widthFix" src="/static/images/message.png"></image><view class="nodatatext"><text decode="true" space="true"></text>内容加载中！</view></view></block><view class="comment-reply"><block wx:for="{{comments}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="comment-reply-item" style="margin-left:-15px;" id="{{detail.id}}" data-parent="{{item.id?item.id:0}}" data-reply="{{item.author.name}}" data-formId="{{item.formId}}" data-event-opts="{{[['tap',[['replyComment',['$event']]]]]}}" bindtap="__e"><block wx:for="{{splitComments[0]}}" wx:for-item="item2" wx:for-index="index2" wx:key="index2"><view class="comment-content" data-id="{{item.id}}" data-reply="{{item.author.name}}" data-parent="{{item.id?item.id:0}}" data-userid="{{item.userid}}" data-formId="{{item.formId}}" data-commentdate="{{item.date}}" data-event-opts="{{[['tap',[['replyComment',['$event']]]]]}}" bindtap="__e"><text data-id="{{item.id}}" data-name="{{item.author_name}}" data-userid="{{item.userid}}" data-formId="{{item.formId}}" data-commentdate="{{item.date}}" data-event-opts="{{[['tap',[['replay',['$event']]]]]}}" bindtap="__e"></text>{{''+item2+''}}<view class="{{[item.images.length==1?'images-list':'image-list']}}"><block wx:for="{{item.images}}" wx:for-item="image" wx:for-index="index2" wx:key="index2"><image class="comment-image" mode="widthFix" data-url="{{image}}" data-urls="{{item.images}}" src="{{image}}" data-event-opts="{{[['tap',[['openimage',['$event']]]]]}}" catchtap="__e"></image></block></view></view></block><block wx:for="{{item.reply}}" wx:for-item="item1" wx:for-index="idx" wx:key="idx"><view class="replay-content"><view class="replay-user" data-id="{{item1.id}}" data-reply="{{item1.author.name}}" data-parent="{{item1.id?item1.id:0}}" data-userid="{{item1.userid}}" data-formId="{{item1.formId}}" data-commentdate="{{item1.date}}" data-event-opts="{{[['tap',[['replyComment',['$event']]]]]}}" catchtap="__e"><text style="font-weight:bold;">{{''+item1.author.name+''}}</text>{{":"+item1.content+''}}</view><block wx:for="{{item1.reply}}" wx:for-item="item2" wx:for-index="idx" wx:key="idx"><view><view class="replay-user" data-id="{{item2.id}}" data-reply="{{item2.author.name}}" data-userid="{{item2.userid}}" data-formId="{{item2.formId}}" data-commentdate="{{item2.date}}" data-event-opts="{{[['tap',[['replyComment',['$event']]]]]}}" catchtap="__e"><text style="font-weight:bold;">{{''+item2.author.name+''}}</text>{{'回复 '+item1.author.name+":"+item2.content+''}}</view><block wx:for="{{item2.reply}}" wx:for-item="item3" wx:for-index="idx" wx:key="idx"><view><view class="replay-user" data-id="{{item3.id}}" data-reply="{{item3.author.name}}" data-userid="{{item3.userid}}" data-formId="{{item3.formId}}" data-commentdate="{{item3.date}}" data-event-opts="{{[['tap',[['replyComment',['$event']]]]]}}" catchtap="__e"><text style="font-weight:bold;">{{''+item3.author.name+''}}</text>{{'回复 '+item2.author.name+":"+item3.content+''}}</view><block wx:for="{{item3.reply}}" wx:for-item="item4" wx:for-index="idx" wx:key="idx"><view><view class="replay-user"><text style="font-weight:bold;">{{''+item4.author.name+''}}</text>{{'回复 '+item3.author.name+":"+item4.content+''}}</view></view></block></view></block></view></block></view></block><view class="comment-footer"><view style="height:1px;background:#f1f1f1;margin-right:20rpx;"></view></view></view></block></view></view><view class="bottom"><block wx:if="{{!showTextarea}}"><form catchsubmit="formSubmit" report-submit="true"><view class="{{['bottom-bar '+(isIphoneX?'bottom-bar-iphonex':'')+' '+(newsItem.forbidcomment?'forbid-comment':'')]}}"><image class="bottom-btn bottom-back" src="/static/images/back.png" data-event-opts="{{[['tap',[['bindBack',['$event']]]]]}}" bindtap="__e"></image><view class="bottom-btn bottom-text relative" style="width:260rpx;"><text>{{placeholder}}</text><block wx:if="{{!user}}"><button class="userLogin" openType="getUserInfo" data-event-opts="{{[['getuserinfo',[['getProfile',['$event']]]]]}}" bindgetuserinfo="__e"></button></block><block wx:else><button data-event-opts="{{[['tap',[['tapcomment',['$event']]]]]}}" class="userLogin" bindtap="__e"></button></block></view><view class="bottom-btn bottom-comment-container relative"><image class="bottom-comment" src="{{detail.isfav?'../../images/collected.png':'../../images/collect.png'}}"></image><block wx:if="{{!user}}"><button class="userLogin" openType="getUserInfo" data-event-opts="{{[['getuserinfo',[['getProfile',['$event']]]]]}}" bindgetuserinfo="__e"></button></block><block wx:else><button class="userLogin" id="{{detail.id}}" data-event-opts="{{[['tap',[['bindFavTap',['$event']]]]]}}" bindtap="__e"></button></block></view><view class="bottom-btn bottom-comment-container"><image class="bottom-btn bottom-fav" src="{{detail.islike?'../../images/liked.png':'../../images/like.png'}}"></image><block wx:if="{{!user}}"><button class="userLogin" openType="getUserInfo" data-event-opts="{{[['getuserinfo',[['getProfile',['$event']]]]]}}" bindgetuserinfo="__e"></button></block><block wx:else><button class="userLogin" id="{{detail.id}}" data-event-opts="{{[['tap',[['bindLikeTap',['$event']]]]]}}" bindtap="__e"></button></block></view><button class="bottom-btn bottom-share bottom-fav btn-clear-style" plain="true" data-event-opts="{{[['tap',[['shareClick',['$event']]]]]}}" bindtap="__e"><image src="/static/images/share.png"></image></button></view></form></block></view><view class="{{['zan-actionsheet '+(isIphoneX?'bottom-bar-iphonex':'')+' '+(shareshow?'zan-actionsheet--show':'')]}}"><view class="zan-actionsheet__mask" data-close-on-click-overlay="{{closeOnClickOverlay}}" data-component-id="{{componentId}}" data-event-opts="{{[['tap',[['_handleZanActionsheetMaskClick',['$event']]]]]}}" catchtap="__e"></view><view class="zan-actionsheet__container"><button data-event-opts="{{[['tap',[['downloadPrefix',['$event']]]]]}}" class="zan-btn zan-actionsheet__btn" catchtap="__e"><image class="down-icon" mode="aspectFit" src="/static/images/down.svg"></image><text>分享海报图</text></button><button class="zan-btn zan-actionsheet__btn" open-type="share"><image class="down-icon" mode="aspectFit" src="/static/images/wechat.svg"></image><text>分享给朋友</text></button></view></view><block wx:if="{{showTextarea}}"><view class="textareacontent"><form catchsubmit="addComment"><view class="textheaders"><view data-event-opts="{{[['tap',[['closeCommentary',['$event']]]]]}}" class="cancel" bindtap="__e">取消</view><block wx:if="{{!user}}"><button class="nopublish" openType="getUserInfo" data-event-opts="{{[['getuserinfo',[['getProfile',['$event']]]]]}}" bindgetuserinfo="__e">登录</button></block><block wx:else><button data-event-opts="{{[['tap',[['addComment',['$event']]]]]}}" class="publish" bindtap="__e">发布</button></block></view><block wx:if="{{showTextarea}}"><view class="textareaBox"><block wx:if="{{!focus}}"><view class="textareaInput">{{content}}</view></block><textarea class="{{['textareaInput '+(focus?'':'hide')]}}" style="height:286rpx;" autoFocus="true" name="inputComment" fixed="true" focus="{{focus}}" maxlength="1000" placeholder="{{placeholder}}" showConfirmBar="false" data-event-opts="{{[['input',[['bindInputContent',['$event']]]],['blur',[['onReplyBlur',['$event']]]],['focus',[['onRepleyFocus',['$event']]]]]}}" value="{{content}}" bindinput="__e" bindblur="__e" bindfocus="__e"></textarea><view class="textNum">{{textNum+"/1000"}}</view></view></block></form></view></block><block wx:if="{{showTextarea}}"><view data-event-opts="{{[['tap',[['closeCommentary',['$event']]]]]}}" class="pagemake" bindtap="__e"></view></block></view><view class="canvas"><canvas style="width:600px;height:970px;" canvas-id="prefix"></canvas></view></view>